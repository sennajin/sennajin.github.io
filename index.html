<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio • GitHub Projects</title>
  <meta name="description" content="A simple portfolio that lists public GitHub repositories with filters and search." />
  <style>
    :root {
      --bg: #0b0c10;
      --card: #16181d;
      --muted: #9aa4b2;
      --text: #e6edf3;
      --accent: #4aa3ff;
      --accent-2: #75e0a3;
      --ring: #2b82ff55;
      --ok: #22c55e;
      --warn: #f59e0b;
      --err: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f6f8fa;
        --card: #ffffff;
        --muted: #4b5563;
        --text: #0b1220;
        --accent: #2563eb;
        --accent-2: #059669;
        --ring: #2563eb33;
        --shadow: 0 10px 30px rgba(0,0,0,.08);
      }
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 80% -10%, #1b53ff22, transparent),
                  radial-gradient(1000px 600px at -10% 10%, #00ffa81d, transparent),
                  var(--bg);
      color: var(--text);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }

    header { display: grid; grid-template-columns: 92px 1fr; gap: 20px; align-items: center; margin-bottom: 20px; }
    header .avatar { width: 92px; height: 92px; border-radius: 16px; overflow: hidden; box-shadow: var(--shadow); border: 1px solid #ffffff10; background: var(--card); }
    header .avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
    header .info h1 { margin: 0; font-size: 1.8rem; letter-spacing: .3px; }
    header .info p { margin: 6px 0 10px; color: var(--muted); }
    header .links { display: flex; gap: 10px; flex-wrap: wrap; }
    .chip { display: inline-flex; gap: 8px; align-items: center; padding: 8px 12px; border-radius: 999px; background: var(--card); border: 1px solid #ffffff12; box-shadow: var(--shadow); font-weight: 600; }
    .chip svg { width: 16px; height: 16px; }

    .panel { background: var(--card); border: 1px solid #ffffff12; border-radius: 16px; box-shadow: var(--shadow); overflow: clip; }
    @supports not (overflow: clip) { .panel { overflow: hidden; } }
    
    .controls { display: grid; grid-template-columns: 1fr 160px 180px 140px; gap: 10px; padding: 12px; position: sticky; top: 0; z-index: 5; -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); border-radius: 16px; background: var(--card); clip-path: inset(0 round 16px); }
    .controls::before, .controls::after { border-radius: inherit; }
    
    .controls input, .controls select, .controls button { width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid #ffffff22; background: #0c0f13; color: var(--text); outline: none; }
    .controls input::placeholder { color: #8b95a5; }
    @media (prefers-color-scheme: light) {
      .controls input, .controls select, .controls button { background: #fff; border-color: #e5e7eb; }
      .controls { background: #fff; }
    }
    .controls button { cursor: pointer; font-weight: 700; border-color: var(--ring); box-shadow: inset 0 0 0 2px var(--ring); background: linear-gradient(180deg, #ffffff09, transparent); }

    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-top: 12px; }
    @media (max-width: 980px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 680px) { header { grid-template-columns: 1fr; } .grid { grid-template-columns: 1fr; } .controls { grid-template-columns: 1fr; position: static; } }

    .card { background: var(--card); border: 1px solid #ffffff12; border-radius: 16px; padding: 16px; display: grid; gap: 12px; transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 20px 40px rgba(0,0,0,.25); border-color: var(--ring); }
    .card h3 { margin: 0; font-size: 1.05rem; display: flex; align-items: center; gap: 8px; }
    .card p { margin: 0; color: var(--muted); }
    .badges { display: flex; flex-wrap: wrap; gap: 6px; }
    .badge { padding: 4px 8px; border-radius: 999px; background: #2a2f37; color: #cfd6df; font-size: .8rem; border: 1px solid #ffffff1a; }
    @media (prefers-color-scheme: light) { .badge { background: #f1f5f9; color: #334155; border-color: #e5e7eb; } }

    .meta { display: flex; gap: 14px; align-items: center; color: var(--muted); font-size: .9rem; }
    .meta svg { width: 16px; height: 16px; }

    .actions { display: flex; gap: 8px; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 12px; border-radius: 12px; font-weight: 700; border: 1px solid #ffffff22; background: linear-gradient(180deg, #ffffff0a, #00000000); color: var(--text); text-decoration: none; }
    .btn.primary { border-color: var(--ring); box-shadow: inset 0 0 0 2px var(--ring); }
    .empty { text-align: center; color: var(--muted); padding: 22px; }
    footer { text-align: center; color: var(--muted); padding: 32px 0 10px; font-size: .9rem; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="avatar" aria-hidden="true"><img id="avatar" alt="" /></div>
      <div class="info">
        <h1 id="name">GitHub Portfolio</h1>
        <p id="bio">Loading profile...</p>
        <div class="links">
          <a id="gh-link" class="chip" target="_blank" rel="noopener">
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5A11.5 11.5 0 0 0 .5 12.3c0 5.2 3.4 9.5 8 11c.6.1.8-.3.8-.6v-2.2c-3.2.7-3.9-1.4-3.9-1.4c-.5-1.2-1.2-1.5-1.2-1.5c-1-.7.1-.7.1-.7c1.1.1 1.7 1.1 1.7 1.1c1 .1.9 1.9 2.9 1.4c.1-.8.4-1.3.7-1.6C6.8 16.7 4.1 15.7 4.1 11.4c0-1.3.5-2.3 1.2-3.2c-.1-.3-.5-1.6.1-3.3c0 0 1-.3 3.3 1.2c.9-.3 1.8-.4 2.6-.4s1.7.1 2.6.4c2.3-1.5 3.3-1.2 3.3-1.2c.6 1.7.2 3 .1 3.3c.8.9 1.2 1.9 1.2 3.2c0 4.3-2.7 5.3-5.2 5.6c.4.3.8 1 .8 2.1v3.1c0 .3.2.7.8.6c4.6-1.5 8-5.8 8-11A11.5 11.5 0 0 0 12 .5Z"/></svg>
            <span id="gh-username">github.com</span>
          </a>
          <a id="site-link" class="chip" target="_blank" rel="noopener" style="display:none">
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm6.93 9h-3.482a15.4 15.4 0 0 0-1.08-5.1A8.015 8.015 0 0 1 18.93 11ZM12 4.07A13.41 13.41 0 0 1 13.9 11H10.1A13.41 13.41 0 0 1 12 4.07ZM4.07 13H7.55a15.4 15.4 0 0 0 1.08 5.1A8.015 8.015 0 0 1 4.07 13ZM7.55 11H4.07A8.015 8.015 0 0 1 8.63 5.9 15.4 15.4 0 0 0 7.55 11Zm4.45 8.93A13.41 13.41 0 0 1 10.1 13h3.8a13.41 13.41 0 0 1-1.9 6.93ZM15.37 18.1A15.4 15.4 0 0 0 16.45 13h3.48a8.015 8.015 0 0 1-4.56 5.1Z"/></svg>
            <span>Website</span>
          </a>
        </div>
      </div>
    </header>

    <section class="panel" aria-label="controls">
      <div class="controls">
        <label class="sr-only" for="search">Search repositories</label>
        <input id="search" placeholder="Search repositories" />
        <select id="lang"><option value="">All languages</option></select>
        <select id="sort">
          <option value="updated">Sort: Recently updated</option>
          <option value="stars">Sort: Most stars</option>
          <option value="name">Sort: Name</option>
        </select>
        <button id="toggleForks" aria-pressed="false">Hide forks</button>
      </div>
    </section>

    <main id="grid" class="grid" aria-live="polite"></main>
    <div id="empty" class="empty" hidden>No repositories match the current filters.</div>

    <footer>
      Built with the GitHub API. No tracking.
    </footer>
  </div>

  <script>
    // === Configuration ===
    // If you fork this page, set your GitHub username here.
    const GITHUB_USERNAME = "sennajin"; // change this if needed

    // Optional: limit to specific repos (leave empty to show all public repos)
    const FEATURED = []; // e.g., ["pytest-api-automation", "spec-kit"]

    // === Helpers ===
    const headers = {
      "Accept": "application/vnd.github+json",
      "X-GitHub-Api-Version": "2022-11-28"
    };

    const $ = (sel) => document.querySelector(sel);
    const grid = $("#grid");
    const empty = $("#empty");

    function fmtDate(iso) {
      try { return new Date(iso).toLocaleDateString(undefined, {year: "numeric", month: "short", day: "2-digit"}); } catch { return ""; }
    }

    function unique(array) { return Array.from(new Set(array)); }

    function setPressed(el, val) { el.setAttribute("aria-pressed", String(val)); el.textContent = val ? "Show forks" : "Hide forks"; }

    // Simple fuzzy matcher
    function matchesSearch(repo, q) {
      if (!q) return true;
      q = q.toLowerCase();
      return (
        (repo.name && repo.name.toLowerCase().includes(q)) ||
        (repo.description && repo.description.toLowerCase().includes(q)) ||
        (repo.language && String(repo.language).toLowerCase().includes(q)) ||
        (repo.topics && repo.topics.some(t => t.toLowerCase().includes(q)))
      );
    }

    // === Rendering ===
    function repoCard(repo) {
      const demoLink = repo.homepage ? `<a class="btn" href="${repo.homepage}" target="_blank" rel="noopener">Demo</a>` : "";
      const topics = (repo.topics || []).slice(0, 8).map(t => `<span class="badge">${t}</span>`).join("");
      const lang = repo.language ? `<span class="badge">${repo.language}</span>` : "";
      const badgeRow = topics || lang ? `<div class="badges">${lang}${topics}</div>` : "";
      const forkIcon = repo.fork ? `<span title="Fork">🍴</span>` : "";
      return `
        <article class="card">
          <h3>${forkIcon}<a href="${repo.html_url}" target="_blank" rel="noopener">${repo.name}</a></h3>
          <p>${repo.description ? repo.description : "No description provided."}</p>
          ${badgeRow}
          <div class="meta">
            <span title="Stars">⭐ ${repo.stargazers_count}</span>
            <span title="Watchers">👁️ ${repo.watchers_count}</span>
            <span title="Open issues">❗ ${repo.open_issues_count}</span>
            <span title="Updated">🗓️ ${fmtDate(repo.updated_at)}</span>
          </div>
          <div class="actions">
            <a class="btn primary" href="${repo.html_url}" target="_blank" rel="noopener">Code</a>
            ${demoLink}
          </div>
        </article>
      `;
    }

    function render(repos, { q = "", lang = "", sort = "updated", hideForks = true } = {}) {
      let list = [...repos];

      if (FEATURED.length) {
        // Put featured repos first
        list.sort((a,b) => (FEATURED.includes(b.name) - FEATURED.includes(a.name)));
      }

      if (hideForks) list = list.filter(r => !r.fork);
      if (lang) list = list.filter(r => (r.language || "").toLowerCase() === lang.toLowerCase());
      if (q) list = list.filter(r => matchesSearch(r, q));

      if (sort === "stars") list.sort((a,b) => b.stargazers_count - a.stargazers_count);
      else if (sort === "name") list.sort((a,b) => a.name.localeCompare(b.name));
      else list.sort((a,b) => new Date(b.updated_at) - new Date(a.updated_at));

      grid.innerHTML = list.map(repoCard).join("");
      empty.hidden = list.length !== 0;
    }

    // === Data ===
    async function fetchUser(username) {
      const res = await fetch(`https://api.github.com/users/${username}`, { headers });
      if (!res.ok) throw new Error(`Profile request failed: ${res.status}`);
      return res.json();
    }

    async function fetchRepos(username) {
      const all = [];
      let page = 1;
      while (true) {
        const res = await fetch(`https://api.github.com/users/${username}/repos?per_page=100&sort=updated&page=${page}`, { headers });
        if (res.status === 403) throw new Error("Rate limited by GitHub. Try again later.");
        if (!res.ok) throw new Error(`Repo request failed: ${res.status}`);
        const batch = await res.json();
        if (!Array.isArray(batch) || batch.length === 0) break;
        all.push(...batch);
        if (batch.length < 100) break;
        page++;
      }
      // Topics require an extra call per repo for some accounts. Try /topics endpoint politely.
      // To keep this page fast, we skip extra requests. Many repos already include topics.
      return all;
    }

    // === Init ===
    (async function init() {
      const nameEl = $("#name");
      const bioEl = $("#bio");
      const avatarEl = $("#avatar");
      const ghLink = $("#gh-link");
      const ghUser = $("#gh-username");
      const siteLink = $("#site-link");

      const search = $("#search");
      const langSel = $("#lang");
      const sortSel = $("#sort");
      const forkBtn = $("#toggleForks");

      let hideForks = true;
      setPressed(forkBtn, hideForks);

      try {
        const [user, repos] = await Promise.all([
          fetchUser(GITHUB_USERNAME),
          fetchRepos(GITHUB_USERNAME)
        ]);

        // Profile
        nameEl.textContent = user.name || user.login;
        bioEl.textContent = user.bio || `Projects by @${user.login}`;
        avatarEl.src = user.avatar_url;
        ghLink.href = user.html_url;
        ghUser.textContent = `@${user.login}`;
        if (user.blog) { siteLink.href = user.blog.startsWith("http") ? user.blog : `https://${user.blog}`; siteLink.style.display = "inline-flex"; }

        // Languages
        const langs = unique(repos.map(r => r.language).filter(Boolean)).sort();
        langSel.innerHTML = '<option value="">All languages</option>' + langs.map(l => `<option value="${l}">${l}</option>`).join("");

        // Initial render
        render(repos, { hideForks });

        // Wire up controls
        search.addEventListener("input", () => render(repos, { q: search.value, lang: langSel.value, sort: sortSel.value, hideForks }));
        langSel.addEventListener("change", () => render(repos, { q: search.value, lang: langSel.value, sort: sortSel.value, hideForks }));
        sortSel.addEventListener("change", () => render(repos, { q: search.value, lang: langSel.value, sort: sortSel.value, hideForks }));
        forkBtn.addEventListener("click", () => { hideForks = !hideForks; setPressed(forkBtn, hideForks); render(repos, { q: search.value, lang: langSel.value, sort: sortSel.value, hideForks }); });

      } catch (err) {
        console.error(err);
        grid.innerHTML = `<div class="empty">${err.message || "Something went wrong."}</div>`;
        empty.hidden = true;
      }
    })();
  </script>
</body>
</html>
